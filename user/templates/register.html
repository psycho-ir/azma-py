{% extends 'base.html' %}
{% load i18n %}
{% load staticfiles %}
{% block content %}

    <form id="frmRegister" action="{% url 'register' %}" method="post" novalidate="">
        {% csrf_token %}
        <div class="form-group center-block">

            <div class="control-group">
                <label  class="form-label">
                    نام
                </label>
                 <div class="controls">
                    <input type="text" class="form-control" id="txtFirstname" name="name" autofocus=""
                             pattern="^[a-zA-Z]{0,100}$"
                             maxlength="30"
                             minlength="2"
                             data-validation-pattern-message="لطفا نام را صحیح وارد کنید"
                             data-validation-required-message="وارد کردن نام الزامی است"
                             data-validation-maxlength-message="بیش از اندازه بلند است"
                             data-validation-minlength-message="بیش از اندازه کوتاه است"
                            required />        <p class="help-block"></p>
                 </div>
            </div>
            <div class="control-group">
                <label class="form-label">
                    نام خانوادگی
                </label>
                <div class="controls">
                    <input type="text" class="form-control" id="txtLastname" name="lastName"
                             pattern="^[a-zA-Z]{0,100}$"
                             maxlength="30"
                             minlength="2"
                             data-validation-pattern-message="لطفا نام خانوادگی را صحیح وارد کنید"
                             data-validation-required-message="وارد کردن نام خانوادگی الزامی است"
                             data-validation-maxlength-message="بیش از اندازه بلند است"
                             data-validation-minlength-message="بیش از اندازه کوتاه است"
                            required/>        <p class="help-block"></p>
                </div>
            </div>
            <div class="control-group">
                <label class="form-label">
                    آدرس ایمیل
                </label>
                <div class="controls">
                    <input type="email" class="form-control" id="txtEmailAddress" name="email"
                            data-validation-email-message="آدرس ایمیل وارد شده صحیح نیست"/>
                     <p class="help-block"></p>
                </div>
            </div>
            <div class="control-group">
                <label class="form-label">
                    نام کاربری
                </label>
                <div class="controls">
                     <input type="text" class="form-control" id="txtUsername" name="username"
                     maxlength="30"
                     minlength="5"
                     data-validation-required-message="وارد کردن نام کاربری الزامی است"
                     data-validation-maxlength-message="بیش از اندازه بلند است"
                     data-validation-minlength-message="بیش از اندازه کوتاه است"
                    required/>        <p class="help-block"></p>

                </div>
            </div>
            <div class="control-group">
                <label class="form-label">
                    گذرواژه
                </label>
                <div class="controls">
                    <input type="password" class="form-control" id="txtPassword" name="password"
                           minlength="6"
                    data-validation-minlength-message="حداقل شش کاراکتر لازم است"
                    data-validation-required-message="وارد کردن این فیلد ضروری است"
                    required/>        <p class="help-block"></p>
                </div>
            </div>
            <div class="control-group">
                <label class="form-label">
                    تکرار گذرواژه
                </label>
                <div class="controls">
                    <input type="password" class="form-control" id="txtConfirmPassword"
                    data-validation-match-message="لطفا گذرواژه ای که انتخاب کردید را مجددا وارد کنید"
                    data-validation-required-message="وارد کردن این فیلد ضروری است"
                    data-validation-match-match="password"
                    required/>        <p class="help-block"></p>
                </div>
            </div>

            <div class="checkbox">
                <label class="form-label">
                    من تمام قوانین و حقوقم را خواندم و متعهد به انجام آنها میباشم.
                </label>
                    <input
                      type="checkbox"
                      id="chkrights"
                      name="terms-and-conditions"
                    />
            </div>

            <button type="submit" class="btn btn-success btn-lg ">
                ثبت
            </button>
        </div>
    </form>

{% endblock %}

{% block js %}
<script src="{% static "js/jqBootstrapValidation.js" %}"></script>
<script type="text/javascript">
$('#frmRegister').submit(function(){

$(chkrights).parent().removeClass('has-error').removeClass('has-success');
$(chkrights).tooltip('destroy');

if(chkrights.checked)
  return true;
else
{
      $(chkrights).addClass('has-error');
      $(chkrights).tooltip({title:'پذیرش تعهدات الزامی است',placement:'right',html:true});
      $(chkrights).tooltip('show');

    return false;
}
});
$(function () { $("input,select,textarea").not("[type=submit]").jqBootstrapValidation({autoAdd: {helpBlocks: false}}); } );
$("input,select,textarea").not("[type=submit]").blur(function(){
    $(this).parent().removeClass('has-error').removeClass('has-success');
    $(this).tooltip('destroy');

    if ($(this).jqBootstrapValidation("hasErrors")) {
        var errors = $(this).jqBootstrapValidation("collectErrors");

        var txt=new String();
        txt=txt.concat('<ul style="list-style:none;padding-right:1px">');
        for (var value in errors) {
            for(var i=0;i<errors[value].length;i++)
            {
                txt=txt.concat('<li>',errors[value][i],'</li>');

            }

        }
        txt=txt.concat('</ul>');

        $(this).parent().addClass('has-error');
        $(this).tooltip({title:txt,placement:'left',html:true});


    }
    else{
         $(this).parent().addClass('has-success');

    }

});
$('.help-block').hide();
</script>

{% endblock %}