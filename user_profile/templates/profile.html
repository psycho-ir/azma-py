{% extends 'base.html' %}

{% block content %}
    <div class="row">
        <div style="padding-top:40px;" class="col-lg-3" id="profile-menu">
            <div class="profile-item profile-item-selected" id="info">
                اطلاعات من
            </div>
            <div class="profile-item" id="exam">
                آزمونها
            </div>
            <div class="profile-item" id="password">
                تغییر رمز عبور
            </div>

        </div>
        <div class="col-lg-9 profile-content" style="height: 400px;">
            <div class="visible" id="info-container">
                <div class="row">
                    <div class="col-lg-2">نام</div>
                    <div class="col-lg-10">{{ user.first_name }}</div>
                </div>
                <div class="row">
                    <div class="col-lg-2">نام خانوادگی</div>
                    <div class="col-lg-10">{{ user.last_name }}</div>
                </div>
                <div class="row">
                    <div class="col-lg-2">نام کاربری</div>
                    <div class="col-lg-10">{{ user.username }}</div>
                </div>
                <div class="row">
                    <div class="col-lg-2"> تاریخ عضویت</div>
                    <div class="col-lg-10">{{ user.date_joined }}</div>
                </div>
            </div>
            <div class="c hidden" id="exam-container">
                    {% for answer in exam_answers %}
                        {{ answer.exam.local_name }}
                        <br />
                        {{ answer.score }}
                        از
                        {{ answer.exam.score }}
                    {% endfor %}
            <div>
                نمره کل:
                {{ sum_score }}
            </div>

            </div>
            <div class="c hidden col-lg-10" id="password-container">
                <form method="post" action="{% url 'profile:change_password' %}">
                    {% csrf_token %}

                    <div class="control-group"><label class="form-label">

                        رمز عبور کنونی

                    </label>

                        <div class="controls">
                            <label></label>
                            <input type="password" class="form-control" name="oldPass"/>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="form-label">
                            رمز عبور جدید
                        </label>

                        <div class="controls">
                            <label></label>
                            <input type="password" class="form-control" name="newPass"/>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="form-label">
                            تکرار رمز عبور
                        </label>

                        <div class="controls">
                            <label></label>
                            <input type="password" class="form-control"/>
                        </div>
                    </div>
                    <button style="margin-top: 10px;" type="submit" class="btn btn-success btn-lg">
                        ثبت
                    </button>
                </form>
            </div>
        </div>
    </div>

{% endblock %}

{% block js %}
    <script type="text/javascript">
        $(document).ready(function () {
            $('.profile-item').click(
                    function (item) {
                        $('.profile-item').removeClass('profile-item-selected');
                        $(item.target).addClass('profile-item-selected');
                        var item_id = item.target.id;
                        var container_name = item_id + '-container';
                        var visible_object = $('.visible')[0];
                        if (visible_object.id == container_name) {
                            return;
                        }

                        $('.visible').fadeOut('slow', function () {
                            $('.visible').removeClass('visible').addClass('hidden');
                            $('#' + container_name).removeClass('hidden').addClass('visible');
                            $('#' + container_name).fadeIn('slow');

                        });

                    }
            )
        });
    </script>
{% endblock %}